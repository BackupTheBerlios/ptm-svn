.\" {PTM/PR/0.1/23-07-1999/"instaluj lub usuń dowiązania do skryptów startowych w stylu System-V"}
.\" Translation 1999 by Piotr Roszatycki
.\" Translation update: Robert Luberda <robert@debian.org>, Apr 2004, sysvinit 2.85-13
.\" $Id: update-rc.d.8,v 1.2 2004/04/05 11:04:55 robert Exp $
.\"
.\" Hey, Emacs!  This is an -*- nroff -*- source file.
.\" Authors: Ian Jackson, Miquel van Smoorenburg
.TH UPDATE\-RC.D 8 "23 grudnia 2003" "Projekt Debiana" "sysv-rc"
.SH NAZWA
update\-rc.d \- instaluje lub usuwa dowiązania do skryptów startowych w stylu System-V
.SH SKŁADNIA
.B update\-rc.d
.RI [ -n ]
.RI [ -f ]
.IB nazwa " remove"
.HP
.B update-rc.d
.RI [ -n ]
.IB nazwa " defaults"
.RI [ NN " | " NN-start " " NN-stop ]
.HP
.B update-rc.d
.RI [ -n ]
.I nazwa
.BR start | stop
.IR "NN runlevel runlevel " ...
.B .
.BR start | stop
.IR "NN runlevel runlevel " ...
.BR . " ..."
.SH OPIS
.B update-rc.d
automatycznie aktualizuje dowiązania do skryptów w stylu System V.
Dowiązania o nazwie
.BI /etc/rc runlevel .d/ NNnazwa
są kierowane do skryptu
.BI /etc/init.d/ nazwa \fR.
Uruchamiane są przez
.BR init ,
gdy zmieniany jest tryb pracy (\fIrunlevel\fP), i ogólnie używane są
do uruchamiania oraz zatrzymywania pracy serwisów systemowych, takich
jak demony.
.I runlevel
jest jednym z trybów pracy obsługiwanym przez
.BR init ", " 0123456789S ,
gdzie
.I NN
jest dwucyfrowym kodem używanym przez
.B init
do określenia kolejności uruchamiania skryptów.

Ten podręcznik opisuje jedynie sposób użycia polecenia
.BR update-rc.d .
Szczegóły dotyczące mechanizmów skryptów startowych w stylu System V
są zawarte w opisie
.BR init (8)
oraz w dokumencie
.IR "Debian Policy Manual" .
.SH INSTALOWANIE DOWIĄZAŃ DO SKRYPTÓW STARTOWYCH
update-rc.d uruchamiany z opcjami
.BR defaults ", " start " lub " stop ,
tworzy dowiązania o nazwie
.BI /etc/rc runlevel .d/[SK] NNnazwa
do skryptu
.BI /etc/init.d/ nazwa\fR.

Jeśli istnieje już jakiś plik o nazwie
.BI /etc/rc runlevel .d/[SK]?? nazwa\fR,
to
.B update-rc.d
nie tworzy dowiązania. Dzięki temu administrator systemu może
poprzestawiać dowiązania (zmieniając tym samym kolejność wykonywania
skryptów) i jeżeli pozostanie przynajmniej jedno dowiązanie, to ta konfiguracja
utworzona przez administratora nie zostanie nadpisana przez
.BR update\-rc.d .

Jeśli użyta jest opcja
.B defaults
to
.B update-rc.d
utworzy dowiązanie do uruchomienia serwisu w trybach pracy
.B 2345
oraz zatrzymania serwisu w trybach pracy
.BR 016 .
Domyślnie, wszystkie dowiązania będą miały kod określający kolejność
o wartości 20, ale może to zostać określone przez dodanie jednego
lub dwóch argumentów
.IR NN .
Jeden argument nadaje ten sam kod do uruchomienia i zatrzymania serwisu,
podanie dwóch argumentów określa kod osobno dla uruchomienia (pierwszy
argument) i osobno dla zatrzymania serwisu (drugi argument).

Zamiast użycia opcji
.BR defaults ,
można określić dokładnie w których trybach pracy dany serwis będzie
uruchamiany i zatrzymywany:

.BR start " lub " stop
określa, czy chodzi o dowiązanie uruchamiające serwis, czy zatrzymujące
go. Kolejny argument,
.IR NN ,
oznacza kod określający kolejność obsługi serwisu, a następne argumenty
określają tryby pracy, dla których określony jest sposób uruchamiania,
czy zatrzymywania serwisu. Ostatnim argumentem danej serii jest
.B .
(znak kropki).

Gdy zamiast
.BR defaults ,
używa się pełnej specyfikacji, zwykle określa się jedną serię argumentów dla
.B start
i jedną dla
.BR stop .
Jeśli istnieje potrzeba określenia różnych kodów kolejności, można określić kilka
serii argumentów dla
.B start
lub odpowiednio dla
.BR stop .

Skrypt
.BI /etc/init.d/ nazwa
musi już istnieć w momencie wywołania polecenia
.BR update-rc.d .
.SH USUWANIE DOWIĄZAŃ
Gdy update-rc.d jest uruchamiany z parametrem
.IR remove ,
usuwane są wszystkie dowiązania z katalogów
.BI /etc/rc runlevel .d
do skryptu
.BI /etc/init.d/ nazwa\fR.
Przed tym należy skasować sam skrypt -
.B update-rc.d
sprawdza, czy zostało już to zrobione.
.B update-rc.d
zwykle jest wywoływane ze skryptu kontrolnego post-removal podczas
usuwania pakietu, gdy parametrem wywołania skryptu jest argument
.BR purge ,
co oznacza, że użytkownik życzy sobie wyczyścić konfigurację tego
pakietu.
Pozostałe pliki z katalogów
.BI /etc/rc runlevel .d\fR,
które nie są dowiązaniami do skryptu
.BI /etc/init.d/ nazwa\fR,
pozostaną nienaruszone.
.SH OPCJE
.TP
.I -n
Niczego nie rusza, tylko pokazuje co mogłoby być zmienione.
.TP
.I -f
Zmusza do usunięcia dowiązań, nawet w przypadku, gdyby skrypt
.BI /etc/init.d/ nazwa
wciąż istniał.
.SH PRZYKŁADY
Utworzenie domyślnych dowiązań:
.nf
.B "   update-rc.d blabla defaults"
.fi
Odpowiednikiem tego polecenia będzie:
.nf
.B "   update-rc.d blabla start 20 2 3 4 5 . stop 20 0 1 6 ."
.fi
.SH BŁĘDY

Powinna być jakaś metoda określenia domyślnych poziomów pracy
lub kolejności obsługi serwisów,
które wykorzystuje parametr
.BR defaults .
.SH PLIKI
.TP
.B /etc/init.d/
Katalog zawierający aktualne skrypty startowe.
.TP
.B /etc/rc?.d/
Katalog zawierający dowiązania używane przez
.BR init
i modyfikowane przez
.BR update-rc.d .
.TP
.B /etc/init.d/skeleton
Przykładowy skrypt do wykorzystania przez programistę przy
tworzeniu własnych skryptów
.BR init.d .
.SH ZOBACZ TAKŻE
.IR "Debian Policy Manual" ,
.br
.BR /etc/init.d/skeleton ,
.br
.BR init (8).
