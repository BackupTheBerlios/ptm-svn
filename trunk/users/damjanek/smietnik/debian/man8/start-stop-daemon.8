.\" {PTM/PR/0.2/16\-01\-2000/"uruchamia i zatrzymuje demony systemowe"}
.\" Translation 1999\-2000 by Piotr Roszatycki
.\" Translation update: Robert Luberda, Jul 2004, dpkg 1.10.22
.\" Hey, Emacs!  This is an \-*\- nroff \-*\- source file.
.TH START\-STOP\-DAEMON 8 "15 marca 1997" "Projekt Debiana" "Debian GNU/Linux"
.SH NAZWA
start\-stop\-daemon \- uruchamia i zatrzymuje demony systemowe
.SH SKŁADNIA
.B start\-stop\-daemon
.BR \-S | \-\-start
.IR opcje
.RB [ \-\- ]
.IR argumenty
.HP
.B start\-stop\-daemon
.BR \-K | \-\-stop
.IR opcje
.HP
.B start\-stop\-daemon
.BR \-H | \-\-help
.HP
.B start\-stop\-daemon
.BR \-V | \-\-version
.SH OPIS
.B start\-stop\-daemon
jest wykorzystywany do kontroli procesów uruchamianych i zatrzymywanych
podczas przełączania trybów pracy.
Opcje
.BR \-\-exec ", " \-\-pidfile ", " \-\-user " i " \-\-name
mogą określić, w jaki sposób
.B start\-stop\-daemon
ma sprawdzić, czy dany proces jest już uruchomiony.

Operacja
.B \-\-start
wymaga, aby
.B start\-stop\-daemon
sprawdził, czy dany proces jest już uruchomiony.
Jeśli proces już istnieje,
.B start\-stop\-daemon
nie wykonuje żadnych czynności i kończy się, zwracając
kod błędu 1 (lub 0, jeśli podano opcję
.BR \-\-oknodo ).
Jeśli dany proces nie jest jeszcze uruchomiony,
to wykonywany jest program określony opcją
.B \-\-exec
(lub, jeśli podano, opcją
.BR \-\-startas ).
Wszelkie argumenty podane tuż po opcji
.B \-\-
są przekazywane do wykonywanego polecenia.

Operacja
.B \-\-stop
także powoduje, że
.B start\-stop\-daemon
sprawdza, czy dany proces jest już uruchomiony. Jeśli tak jest, to
.B start\-stop\-daemon
wysyła sygnał określony opcją
.B \-\-signal
i kończy swoją pracę z kodem błędu 0.
Jeśli proces nie istnieje,
.B start\-stop\-daemon
kończy się z kodem błędu 1 (lub 0, jeśli podano opcję
.BR \-\-oknodo ).
Jeżeli podano opcję
.BR \-\-retry ,
to
.B start\-stop\-daemon
sprawdzi, czy proces(y) się zakończył(y).

Proszę zauważyć, że jeżeli nie podano opcji
.BR \-\-pidfile ,
to
.B start\-stop\-daemon
zachowuje się podobnie do
.BR killall (1).
.B start\-stop\-daemon
przejrzy tabelę procesów, szukając jakiegokolwiek procesu o zgodniej
nazwie, identyfikatorze użytkownika i/lub grupy (jeżeli je podano).
Znalezienie jakiegokolwiek pasującego procesu spowoduje, że
.BR \-\-start
nie uruchomi procesu.
W wypadku opcji
.BR \-\-stop
do wszystkich pasujących procesów zostanie
wysłany sygnał KILL.
Procesom, mającym długo uruchomione dzieci, które muszą przeżyć
operację
.BR \-\-stop ,
należy określić plik pidfile.

.SH OPCJE

.TP
\fB\-x\fP|\fB\-\-exec\fP \fIprogram\fP
Sprawdza istnienie procesów, które byłyby wywołane uruchomieniem podanego
w opcji programu (sprawdzana jest zawartość
.B /proc/\fIpid\fB/exe\fP
).
.TP
\fB\-p\fP|\fB\-\-pidfile\fP \fIplik-pid\fP
Sprawdzanie procesów, których pid jest podany w pliku
.IR plik-pid .
.TP
\fB\-u\fP|\fB\-\-user\fP \fIużytkownik\fP|\fIuid\fP
Sprawdzanie dla procesów, których właścicielem jest użytkownik
o nazwie
.I użytkownik
lub numerze
.IR uid .
.TP
\fB\-n\fP|\fB\-\-name\fP \fInazwa-procesu\fP
Sprawdzanie dla procesów o nazwie
.I nazwa-procesu
(sprawdzana jest zawartość
.BR /proc/\fIpid\fB/stat\fP ).
.TP
\fB\-s\fP|\fB\-\-signal\fP \fIsygnał\fP
Przy operacji
.BR \-\-stop ,
wysyłany jest sygnał o podanej wartości do zatrzymywanego procesu
(domyślnie jest to 15).
.TP
\fB\-R\fP|\fB\-\-retry\fP \fItimeout\fP|\fIplan-działania\fP
W czasie operacji
.B \-\-stop
powoduje sprawdzenie przez
.BR start\-stop\-daemon ,
czy proces(y) się zakończył(y). Sprawdzanie jest powtarzane, jeżeli działa
jakikolwiek pasujący proces, dopóki wszystkie się nie skończą.
Jeżeli procesy się nie zakończą, podejmowane są akcje określone przez
parametr
.IR plan-działania .

Jeżeli określono
.I timeout
zamiast
.IR plan-działania ,
to wtedy używany jest następujący plan działania:
.IB sygnał / timeout /KILL/ timeout \fR,
gdzie
.I sygnał
jest określony za pomocą opcji
.BR \-\-signal .

.I plan-działania
jest listą co najmniej dwóch wartości oddzielonych znakami ukośnika
.RB ( / );
każdą z tych wartości może być albo
.BI \- numer-sygnału
lub [\fB\-\fP]\fInazwa-sygnału\fP, co oznacza wysłanie tego sygnału,
albo
.IR timeout ,
określający liczbę sekund, którą należy czekać na zakończenie procesu,
albo
.IR forever ,
oznaczający, że reszta planu działania ma być powtarzana dopóki jest to
konieczne.

Jeżeli osiągnięto koniec planu działania, a opcja
.B forever
nie została użyta, to
.B start\-stop\-daemon
kończy działanie z kodem błędu 2.
Jeżeli został określony plan działania, to sygnał podany w
.B \-\-signal
jest ignorowany.
.TP
\fB\-a\fP|\fB\-\-startas\fP \fIścieżka\fP
Przy operacji
.BR \-\-start ,
Uruchamiany jest program o określonej
.IR ścieżce .
Jeśli brak tej opcji, domyślnie uruchamiany jest program podany
w opcji
.BR \-\-exec .
.TP
.BR \-t | \-\-test
Wyświetlana jest czynność, jaką należałoby wykonać, a także zwracany
jest odpowiedni kod błędu, ale opcja ta nie powoduje żadnych operacji.
.TP
.BR \-o | \-\-oknodo
Zwracany jest kod błędu 0, nawet gdyby operacja nie zakończyła się
powodzeniem (zwróciłaby 1).
.TP
.BR \-q | \-\-quiet
Nie są wyświetlane żadne informacje oprócz komunikatów o błędach.
.TP
\fB\-c\fP|\fB\-\-chuid\fP \fIużytkownik\fR|\fIuid\fP
Zmiana użytkownika/uid przed uruchomieniem procesu. Można także zmienić
grupę poprzez dołączenie
.B :
wraz z nazwą grupy bądź numerem gid, podobnie
jak w poleceniu `chown' (\fIużytkownik\fP\fB:\fP\fIgrupa\fP).
Podczas korzystania z tej
opcji należy pamiętać, że grupa główna i poboczne zostaną ustawione, nawet gdy
nie podano opcji
.BR \-\-group .
Opcja
.B \-\-group
jest przydatna tylko dla grup, których podany użytkownik nie jest członkiem
(na przykład przy dodawaniu procesowi członkostwa grupy dla takich
użytkowników jak
.BR nobody ).
.TP
\fB\-r\fP|\fB\-\-chroot\fP \fIroot\fP
Zmienia katalog bieżący na
.I root
i czyni go głównym katalogiem (rootem) przed wystartowaniem procesu.
Proszę zauważyć, że plik pidfile jest tworzony po wykonaniu chroot.
.TP
\fB\-d\fP|\fB\-\-chdir\fP \fIścieżka\fP
Przed uruchomieniem procesu zmienia katalog bieżący na
.IR ścieżkę .
Robione jest to przed zmienieniem głównego katalogu (roota),
jeżeli podano również opcję \fB\-r\fP|\fB\-\-chroot\fP. Jeśli
nie podano tej opcji, to przed uruchomieniem procesu
.B start\-stop\-daemon
ustawi jego katalog bieżący na główny katalog (root).
.TP
.BR \-b | \-\-background
Zwykle używa się tej opcji dla programów, które nie odłączają się od terminala
(detach) samoistnie. Ta opcja spowoduje, że
.B start\-stop\-daemon
utworzy proces potomny przed uruchomieniem programu i będzie kontynuować
go w tle.
.B UWAGA: start\-stop\-daemon
nie może sprawdzić kodu błędu jeżeli proces się nie wykona z
.B jakiegokolwiek
powodu. Ta opcja powinna być używana w ostateczności, gdy dany program
sam nie tworzy procesu potomnego.
.TP
\fB\-N\fP|\fB\-\-nicelevel\fP \fIliczba\fP
Zmienia priorytet uruchamianego procesu.
.TP
.BR \-m | \-\-make\-pidfile
Opcja używana, gdy program sam nie tworzy własnego pliku pid. Wykorzystanie
tej opcji spowoduje, że
.B start\-stop\-daemon
utworzy plik, który został podany w opcji
.B \-\-pidfile
i umieści w nim numer pid tuż przed uruchomieniem procesu. Należy zauważyć,
że ta opcja nie skasuje tego pliku po zatrzymaniu programu.
.B UWAGA:
Ta opcja może nie zadziałać w każdym przypadku. Zadziała przede wszystkim,
gdy program zostanie uruchomiony z procesu potomnego, dlatego też ta
opcja jest użyteczna jedynie wraz z opcją
.BR \-\-background .
.TP
.BR \-v | \-\-verbose
Wyświetlane są dodatkowe komunikaty.
.TP
.BR \-H | \-\-help
Wyświetlana jest krótka pomoc.
.TP
.BR \-V | \-\-version
Wyświetlana jest informacja o wersji programu.

.SH AUTORZY
Marek Michałkiewicz <marekm@i17linuxb.ists.pwr.wroc.pl> na podstawie
poprzedniej wersji napisanej przez Iana Jacksona <ijackson@gnu.ai.mit.edu>

Podręcznik napisał Klee Dienes <klee@mit.edu>, a poprawił Ian Jackson.
